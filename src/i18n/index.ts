import type { App } from 'vue'
import i18next, { type TFunction } from 'i18next'

// Initialize i18next
i18next.init({
  lng: 'en',
  fallbackLng: 'en',
  resources: {
    en: {
      translation: {
        welcome: 'Welcome to My Budget',
        envelope_method: 'Envelope method in action!',
        continue_with_google: 'Continue with Google',
        redirecting_title: 'Redirecting...',
        redirecting_message: 'Checking your session and preparing your workspace.',
        detecting_language_message: 'Determining your interface language...',
        detecting_scenario_message: 'Determining your current scenario...',
        base_currency_setup_message: 'Welcome! Base currency setup is coming soon.',
        scenario_slug_error_message: 'Could not fetch scenario slug. Please try again.',
        base_currency_setup_title: 'Choose base currency',
        base_currency_setup_description: 'You can add income, expenses, and savings in any currency. To see consolidated totals, choose a base currency. You can change it later in your account settings.',
        select_currency_placeholder: 'Select a currency',
        select_currency_helper: 'This will be used as your base currency.',
        select_currency_error: 'Please choose a currency.',
        cancel: 'Cancel',
        continue: 'Continue',
        nav_income: 'Income',
        nav_expense: 'Expense',
        nav_savings: 'Savings',
        nav_goal: 'Goal',
        nav_idea: 'Idea',
        nav_report: 'Report',
        nav_settings: 'Settings',
        nav_my_income: 'My Income',
        nav_my_savings: 'My Savings',
        nav_my_expense: 'My Expenses',
        nav_my_goal: 'My Goals',
        nav_how_can_help: 'Method envelopes',
        nav_download_report: 'Full report',
        summary_title: 'Summary',
        summary_income: 'Income',
        summary_savings: 'Savings',
        summary_expense: 'Expenses',
        summary_goal: 'Goals',
        summary_balance: 'Balance',
        currency_symbol: 'USD',
        sign_out: 'Sign Out',
        page_title_income: 'Income',
        page_title_expense: 'Expense',
        page_title_savings: 'Savings',
        page_title_goal: 'Goal',
        page_title_idea: 'Idea',
        page_title_report: 'Report',
        page_title_settings: 'Settings',
        page_title_dashboard: 'Dashboard',
        loading: 'Loading...',
        add_alternative_scenario: 'Add alternative scenario',
        create_scenario_title: 'Create new scenario',
        create_scenario_from_scratch: 'Create scenario from scratch',
        clone_current_scenario: 'Clone current scenario',
        scenario_name_placeholder: 'Enter scenario name',
        scenario_name_required: 'Scenario name is required',
        scenario_currency_label: 'Base currency',
        not_found_title: '404 - Page Not Found',
        not_found_message: 'Oops! The page you are looking for seems to have disappeared. Our little mouse couldn\'t find it either.',
        not_found_back_home: 'Back to Home',
        income_empty_title: 'No income yet',
        income_empty_subtitle: 'Add both monthly and annual income. In any currency. Choose a source from the examples below, edit it, or add your own.',
        income_empty_add_first: 'Add your first income',
        savings_empty_title: 'No savings yet',
        savings_empty_subtitle: 'Add your existing savings. Currently, this data is used to show the overall budget picture, and the functionality will be enhanced in the future.',
        savings_empty_add_first: 'Add savings',
        expense_empty_title: 'No expenses yet',
        expense_empty_subtitle: 'Create expense categories and set a monthly limit for each. This is the envelope method — allocate your budget by category, not by tracking every purchase.',
        expense_empty_add_first: 'Add your first expense',
        goal_empty_title: 'No goals yet',
        goal_empty_subtitle: 'Set your financial goals and track your progress towards achieving them.',
        goal_empty_add_first: 'Add goal',
        income_form_title: 'Add Income',
        income_form_category_label: 'Category',
        income_form_amount_label: 'Amount',
        income_form_currency_label: 'Currency',
        income_form_frequency_label: 'Frequency',
        income_form_date_label: 'Payment Day',
        income_form_date_helper: 'Select the day of the month when you receive this income (e.g., 5th for salary on the 5th of each month)',
        income_form_submit: 'Add Income',
        expense_form_title: 'Add Expense',
        expense_form_category_label: 'Category',
        expense_form_amount_label: 'Amount',
        expense_form_currency_label: 'Currency',
        expense_form_frequency_label: 'Frequency',
        expense_form_submit: 'Add Expense',
        savings_form_title: 'Add Savings',
        savings_form_name_label: 'Savings Name',
        savings_form_amount_label: 'Amount',
        savings_form_currency_label: 'Currency',
        savings_form_interest_label: 'Are the money earning interest in the bank?',
        savings_form_interest_rate_label: 'Interest Rate (annual, %)',
        savings_form_capitalization_period_label: 'Capitalization Period',
        savings_form_submit: 'Add Savings'
      }
    },
    ru: {
      translation: {
        welcome: 'Добро пожаловать в Мой Бюджет',
        envelope_method: 'Метод конвертов в действии!',
        continue_with_google: 'Продолжить через Google',
        redirecting_title: 'Перенаправляем...',
        redirecting_message: 'Проверяем вашу сессию и готовим рабочее пространство.',
        detecting_language_message: 'Определяем язык вашего интерфейса...',
        detecting_scenario_message: 'Определяем ваш текущий сценарий...',
        base_currency_setup_message: 'Добро пожаловать! Скоро выберем базовую валюту.',
        scenario_slug_error_message: 'Не удалось получить slug сценария. Попробуйте ещё раз.',
        base_currency_setup_title: 'Выберите базовую валюту',
        base_currency_setup_description: 'Вы можете вносить доходы, расходы и накопления в любой валюте. Чтобы подвести общие итоги, выберите базовую валюту. Её можно будет поменять в настройках личного кабинета.',
        select_currency_placeholder: 'Выберите валюту',
        select_currency_helper: 'Она будет использоваться как базовая валюта.',
        select_currency_error: 'Пожалуйста, выберите валюту.',
        cancel: 'Отмена',
        continue: 'Продолжить',
        nav_income: 'Доходы',
        nav_expense: 'Расходы',
        nav_savings: 'Накопления',
        nav_goal: 'Цели',
        nav_idea: 'Идеи',
        nav_report: 'Отчёты',
        nav_settings: 'Настройки',
        nav_my_income: 'Мои доходы',
        nav_my_savings: 'Мои накопления',
        nav_my_expense: 'Мои расходы',
        nav_my_goal: 'Мои цели',
        nav_how_can_help: 'Метод конвертов',
        nav_download_report: 'Полный отчёт',
        summary_title: 'СВОДКА',
        summary_income: 'Доходы',
        summary_savings: 'Накопления',
        summary_expense: 'Расходы',
        summary_goal: 'Цели',
        summary_balance: 'Остаток',
        currency_symbol: 'Р',
        sign_out: 'Выйти',
        page_title_income: 'Доходы',
        page_title_expense: 'Расходы',
        page_title_savings: 'Накопления',
        page_title_goal: 'Цели',
        page_title_idea: 'Идеи',
        page_title_report: 'Отчёты',
        page_title_settings: 'Настройки',
        page_title_dashboard: 'Панель управления',
        loading: 'Загрузка...',
        add_alternative_scenario: 'Добавь альтернативный сценарий',
        create_scenario_title: 'Создать новый сценарий',
        create_scenario_from_scratch: 'Создать сценарий с чистого листа',
        clone_current_scenario: 'Клонировать текущий',
        scenario_name_placeholder: 'Введите название сценария',
        scenario_name_required: 'Название сценария обязательно',
        scenario_currency_label: 'Базовая валюта',
        not_found_title: '404 - Страница не найдена',
        not_found_message: 'Упс! Страница, которую вы ищете, похоже, исчезла. Наша маленькая мышка тоже не смогла её найти.',
        not_found_back_home: 'Вернуться на главную',
        income_empty_title: 'Доходов пока нет',
        income_empty_subtitle: 'Добавляй как ежемесячные доходы, так и ежегодные. В любой валюте. Бери источник из примера ниже, редактируй или добавляй свой.',
        income_empty_add_first: 'Добавить первый доход',
        savings_empty_title: 'Накоплений пока нет',
        savings_empty_subtitle: 'Добавь уже имеющиеся накопления. Сейчас эти данные используются для общей картины бюджета, в будущем функционал будет расширен.',
        savings_empty_add_first: 'Добавить накопления',
        expense_empty_title: 'Расходов пока нет',
        expense_empty_subtitle: 'Создай категории расходов и установи месячный лимит для каждой. Это метод конвертов — распределяй бюджет по категориям, а не отслеживай каждую покупку.',
        expense_empty_add_first: 'Добавить первый расход',
        goal_empty_title: 'Целей пока нет',
        goal_empty_subtitle: 'Установи свои финансовые цели и отслеживай прогресс их достижения.',
        goal_empty_add_first: 'Добавить цель',
        income_form_title: 'Добавить доход',
        income_form_category_label: 'Категория',
        income_form_amount_label: 'Сумма',
        income_form_currency_label: 'Валюта',
        income_form_frequency_label: 'Частота',
        income_form_date_label: 'День поступления платежа',
        income_form_date_helper: 'Выберите число месяца, когда вы получаете этот доход (например, 5-е для зарплаты, которая приходит 5-го числа каждого месяца)',
        income_form_submit: 'Добавить доход',
        expense_form_title: 'Добавить расход',
        expense_form_category_label: 'Категория',
        expense_form_amount_label: 'Сумма',
        expense_form_currency_label: 'Валюта',
        expense_form_frequency_label: 'Частота',
        expense_form_submit: 'Добавить расход',
        savings_form_title: 'Добавить накопления',
        savings_form_name_label: 'Название накопления',
        savings_form_amount_label: 'Сумма накопления',
        savings_form_currency_label: 'Валюта накопления',
        savings_form_interest_label: 'Лежат ли деньги под проценты в банке',
        savings_form_interest_rate_label: 'Процентная ставка (годовая, %)',
        savings_form_capitalization_period_label: 'Период капитализации',
        savings_form_submit: 'Добавить накопления'
      }
    }
  }
})

// Simple plugin to expose i18next via Vue global properties
export default {
  install(app: App) {
    app.config.globalProperties.$t = i18next.t.bind(i18next)
  },
}

// Composition helper for components
export const useTranslation = () => {
  const t = i18next.t.bind(i18next) as TFunction
  return { t }
}

